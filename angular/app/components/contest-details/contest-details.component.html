<div class="contest-details-container">
    <div *ngIf="!error && contest;else error_temp">
        <h2>Compétition</h2>
        <ul>
            <li>Nom : {{contest.name}}</li>
            <li>Type : {{contest.type}}</li>
            <li>Description : {{contest.description}}</li>
        </ul>
        <div class="table-header">
            <mat-form-field>
                <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
            </mat-form-field>
        </div>
        <div>Mes matchs en cours</div>
        <div fxLayout="column" fxLayoutAlign="center center" class="table-container mat-elevation-z8">
            <mat-table [dataSource]="dataMyWorkouts" matSort>

                <ng-container matColumnDef="sport">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Sport </mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{row.sport}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="description">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Description </mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{row.description}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="date">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Date </mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{row.date | date: 'dd/MM/yyyy'}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="end_date">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Date de fin </mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{row.end_date | date: 'dd/MM/yyyy'}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="location_name">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Location </mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{row.location_name}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="opponent">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Adversaire </mat-header-cell>
                    <mat-cell *matCellDef="let row" > <span *ngIf="row.opponent">{{row.opponent.email}}</span> </mat-cell>
                </ng-container>

                <ng-container matColumnDef="actions">
                    <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                    <mat-cell *matCellDef="let row">
                        <button mat-icon-button color="primary">
                            <mat-icon aria-label="Done" (click)="matchEndFormDialog(row)">done</mat-icon>
                        </button>
                        <button mat-icon-button color="primary" (click)="matchFormDialog('edit', row)">
                                <mat-icon aria-label="Edit">edit</mat-icon>
                        </button>
                        <button mat-icon-button color="primary" (click)="deleteWorkout(row)">
                            <mat-icon aria-label="Delete">delete</mat-icon>
                        </button>
                    </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
            </mat-table>
            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
            
        </div>
        <button mat-raised-button (click)="matchFormDialog('add', null)">Créer un match</button>
        <div>Mes matchs terminées</div>
        <div fxLayout="column" fxLayoutAlign="center center" class="table-container mat-elevation-z8">
            <mat-table [dataSource]="dataMyPastWorkouts" matSort>

                <ng-container matColumnDef="sport">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Sport </mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{row.sport}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="description">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Description </mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{row.description}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="end_date">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Date de fin </mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{row.end_date | date: 'dd/MM/yyyy'}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="location_name">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Location </mat-header-cell>
                    <mat-cell *matCellDef="let row"> {{row.location_name}} </mat-cell>
                </ng-container>

                <ng-container matColumnDef="opponent">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Adversaire </mat-header-cell>
                    <mat-cell *matCellDef="let row" > <span *ngIf="row.opponent">{{row.opponent.email}}</span> </mat-cell>
                </ng-container>
                <mat-header-row *matHeaderRowDef="displayedPastColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedPastColumns;"></mat-row>
            </mat-table>

            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
        </div>
        
    </div>
    <div>Classement</div>
    <div fxLayout="column" fxLayoutAlign="center center" class="table-container mat-elevation-z8">
        <ul>
            <li></li>
        </ul>
    </div>

    <button mat-raised-button (click)="matchFormDialog('add', null)">Créer un match</button>

    <button (click)="goBack()">Back</button>
    <ng-template #error_temp><div *ngIf="error">{{error}}</div></ng-template>
</div>
